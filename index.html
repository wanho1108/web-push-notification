<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no"/>
  <meta name="google" content="notranslate"/>
  <meta name="msapplication-tap-highlight" content="no"/>
  <meta http-equiv="cache-control" content="no-store"/>
  <meta http-equiv="expires" content="0"/>
  <script>
    // register service worker:
    if (navigator.serviceWorker) {
      navigator.serviceWorker.register('./web-push-notification/service-worker.js').then(function() {
        return navigator.serviceWorker.ready;
      })
      .then(function(registration) {
        console.log(registration); // service worker is ready and working...
      });
      
      navigator.serviceWorker.addEventListener('message', function(event) {
        console.log(event.data.message); // Hello World !
      });
    }
  </script>

  <title>Service Worker Communication</title>
</head>
<body>
  <p>Hello</p>>
  <button>Notify me!</button>
  <script>
    window.addEventListener('load', function () {
  // At first, let's check if we have permission for notification
  // If not, let's ask for it
  if (Notification && Notification.permission !== "granted") {
    Notification.requestPermission(function (status) {
      if (Notification.permission !== status) {
        Notification.permission = status;
      }
    });
  }

  var button = document.getElementsByTagName('button')[0];

  button.addEventListener('click', function () {
    // If the user agreed to get notified
    if (Notification && Notification.permission === "granted") {
      var n = new Notification("Hi!");
    }

    // If the user haven't tell if he want to be notified or not
    // Note: because of Chrome, we are not sure the permission property
    // is set, therefore it's unsafe to check for the "default" value.
    else if (Notification && Notification.permission !== "denied") {
      Notification.requestPermission(function (status) {
        if (Notification.permission !== status) {
          Notification.permission = status;
        }

        // If the user said okay
        if (status === "granted") {
          var n = new Notification("Hi!");
        }

        // Otherwise, we can fallback to a regular modal alert
        else {
          alert("Hi!");
        }
      });
    }

    // If the user refuse to get notified
    else {
      // We can fallback to a regular modal alert
      alert("Hi!");
    }
  });
});
  </script>
</body>
</html>